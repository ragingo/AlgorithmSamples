{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "[cpp] CMake: Configure",
      "type": "shell",
      "command": "cmake",
      "args": ["-S", "cpp", "-B", "cpp/build"],
      "group": "build",
      "problemMatcher": []
    },
    {
      "label": "[cpp] CMake: Build",
      "type": "shell",
      "command": "cmake",
      "args": [
        "--build",
        "cpp/build",
        "--config",
        "${input:buildConfig}",
        "--target",
        "ALL_BUILD",
        "-j",
        "6"
      ],
      "group": "build",
      "problemMatcher": ["$msCompile"]
    },
    {
      "label": "[cpp] CMake: Clean",
      "type": "shell",
      "command": "cmake",
      "args": ["--build", "cpp/build", "--target", "clean"],
      "problemMatcher": []
    },
    {
      "label": "[cpp] Run algorithms_runner",
      "type": "shell",
      "command": "./cpp/build/${input:buildConfig}/algorithms_runner",
      "group": "test",
      "problemMatcher": [],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "windows": {
        "command": "./cpp/build/${input:buildConfig}/algorithms_runner.exe",
        "options": {
          "cwd": "${workspaceFolder}"
        }
      }
    },
    {
      "label": "[cpp] Run algorithms_tests",
      "type": "shell",
      "command": "./cpp/build/tests/${input:buildConfig}/algorithms_tests",
      "group": "test",
      "problemMatcher": [],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "windows": {
        "command": "./cpp/build/tests/${input:buildConfig}/algorithms_tests.exe",
        "options": {
          "cwd": "${workspaceFolder}"
        }
      }
    },
    {
      "label": "[cpp] Format all files",
      "type": "shell",
      "command": "./cpp/scripts/format.sh",
      "group": "build",
      "problemMatcher": [],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "windows": {
        "command": "bash",
        "args": ["./cpp/scripts/format.sh"],
        "options": {
          "cwd": "${workspaceFolder}"
        }
      }
    },
    {
      "label": "[cpp] Check format",
      "type": "shell",
      "command": "./cpp/scripts/check-format.sh",
      "group": "test",
      "problemMatcher": [],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "windows": {
        "command": "bash",
        "args": ["./cpp/scripts/check-format.sh"],
        "options": {
          "cwd": "${workspaceFolder}"
        }
      }
    },
    {
      "label": "[cpp] CTest: Run all tests",
      "type": "shell",
      "command": "ctest",
      "args": ["-C", "Release", "--output-on-failure"],
      "group": "test",
      "problemMatcher": [],
      "options": {
        "cwd": "./cpp/build"
      },
      "windows": {
        "options": {
          "cwd": "./cpp/build"
        }
      }
    },
    {
      "label": "[cpp] Run clang-tidy",
      "type": "shell",
      "command": "./cpp/scripts/lint.sh",
      "group": "test",
      "problemMatcher": [],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "windows": {
        "command": "bash",
        "args": ["./cpp/scripts/lint.sh"],
        "options": {
          "cwd": "${workspaceFolder}"
        }
      }
    }
  ],
  "inputs": [
    {
      "id": "buildConfig",
      "type": "pickString",
      "description": "Select the build configuration",
      "options": ["Debug", "Release"],
      "default": "Debug"
    }
  ]
}
